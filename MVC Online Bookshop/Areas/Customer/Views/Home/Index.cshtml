@{ 
    ViewData["Title"] = "Home";
}
@model FrontPageVM

@section Styles
{
    <style>
       .tag-slider .carousel-item .col {
         padding: 0 5px;
        }

        @@media (max-width: 767px) {
          .tag-slider .carousel-inner .carousel-item > div {
            display: none;
          }
          .tag-slider .carousel-inner .carousel-item > div:first-child {
            display: block;
          }
                }

        .tag-slider .carousel-inner .carousel-item.active,
        .tag-slider .carousel-inner .carousel-item-next,
        .tag-slider .carousel-inner .carousel-item-prev {
          display: flex;
        }

        /* medium and up screens */
        @@media (min-width: 768px) {
          .tag-slider .carousel-inner .carousel-item-end.active,
          .tag-slider .carousel-inner .carousel-item-next {
            transform: translateX(16.6%);
          }

          .tag-slider .carousel-inner .carousel-item-start.active,
          .tag-slider .carousel-inner .carousel-item-prev {
            transform: translateX(-16.6%);
          }
  
          /*  half slides CSS */

          .tag-slider .carousel-inner:before {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 90%;
            left: 0;
            content: "";
            display: block;
            background-color: #fff;
            z-index: 2;
          }
          .tag-slider .carousel-inner:after {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 90%;
            content: "";
            display: block;
            background-color: #fff;
            z-index: 2;
          }

          .tag-slider.carousel-control-prev {
            left: 5%;
            top: -25%;
          }

          .tag-slider.carousel-control-next {
            right: 5%;
            top: -25%;
          }
         }

        span.tag-slider.carousel-control-next-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%234582ec' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath d='M2.75 0l-1.5 1.5L3.75 4l-2.5 2.5L2.75 8l4-4-4-4z'/%3e%3c/svg%3e");
        }

        span.tag-slider.carousel-control-prev-icon {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='%234582ec' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath d='M5.25 0l-4 4 4 4 1.5-1.5L4.25 4l2.5-2.5L5.25 0z'/%3e%3c/svg%3e");
        }

        .tag-slider .carousel-inner .carousel-item-end,
        .tag-slider .carousel-inner .carousel-item-start {
          transform: translateX(0);
        }

        .tag-slider .book-cover {
            max-height: 260px;
        }

        .header-carousel .carousel-control-prev,
        .header-carousel .carousel-control-next{
            width: 4%;
        }
        
        #FrontPageBody {
            padding-top: 5rem;
        }

      
    </style>
}

@section containerFluid
{
    @await Component.InvokeAsync(name: "HeaderCarousel")
}




<div id="FrontPageBody" class="vstack gap-4">

    @* CAROUSELS *@
    @for (var i = 0; i < @Model.Carousels.Count; i++)
    {
        <div id="@($"carousel{@i}")" class="p-2">
            @await Component.InvokeAsync(name: "Carousel", new { carousel = Model.Carousels[i] })
        </div>
    }


</div>




@section Scripts
{
    <script type="text/javascript">

        for (var i = 0; i < @Model.Carousels.Count; i++) {

            var items = document.querySelectorAll('#carousel' + i + ' .carousel .carousel-item');
            items.forEach((el) => {
                var minPerSlide = 6;
                var next = el.nextElementSibling;
                for (var j = 1; j < minPerSlide; j++) {
                    if (!next) {
                        // wrap carousel by using first child
                        next = items[0];
                    }
                    var cloneChild = next.cloneNode(true);
                    el.appendChild(cloneChild.children[0]);
                    next = next.nextElementSibling;
                }
            });
        }
	    
		
    </script>
}
